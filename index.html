<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>대요리문답 127문: 윗사람에 대한 존경</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <style>
        body {
            font-family: 'Pretendard', sans-serif;
            line-height: 1.8;
        }
        h1, h2, h3 {
            font-weight: 700;
        }
        strong {
            font-weight: 600;
            color: #1e40af; /* blue-800 */
        }
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 50;
        }
        .modal-container {
            background-color: white;
            padding: 2rem;
            border-radius: 0.5rem;
            width: 90%;
            max-width: 640px;
            max-height: 90vh;
            overflow-y: auto;
        }
        .prose {
            max-width: none;
        }
        .prose p, .prose ul {
            margin-bottom: 1rem;
        }
        .prose li {
            margin-left: 1.5rem;
            list-style-type: disc;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div class="max-w-4xl mx-auto p-6 sm:p-10">
        
        <header class="mb-12 text-center">
            <h1 class="text-4xl font-bold text-gray-900 mb-2">대요리문답 127문: 윗사람에 대한 존경</h1>
            <p class="text-lg text-gray-600">제5계명에 근거한 아랫사람의 의무</p>
        </header>

        <main>
            <section class="mb-12 bg-white p-8 rounded-lg shadow-sm">
                <h2 class="text-3xl font-bold text-gray-800 mb-6 border-b pb-3">Chapter 1: 대요리문답 제127문 전문</h2>
                <div class="chapter-content prose">
                    <h3 class="text-xl font-semibold text-gray-700 mb-3">문 127. 아랫사람들은 윗사람들에 대한 존경을 어떻게 표해야 합니까?</h3>
                    <p><strong>답.</strong> 아랫사람들이 윗사람들에게 마땅히 표해야 할 존경은 마음과 말과 행동으로 합당한 공경을 나타내는 것이고, 그들을 위한 기도와 감사를 하는 것이며, 그들의 덕과 은혜를 본받는 것이고, 그들의 합법적인 명령과 권면에 즐겨 순종하는 것이며, 그들의 교정에 마땅히 복종하는 것이고, 그들의 여러 지위와 신분의 성격에 따라 윗사람들의 인격과 권위에 충성하고 보호하며 지지하는 것이고, 아울러 그들의 연약함을 참고 사랑으로 덮음으로써 그들과 그들의 다스림이 명예롭게 될 수 있도록 하는 것입니다.</p>
                </div>
                <div class="mt-8 text-right">
                    <button class="ask-question-btn bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition duration-300">
                        이해를 돕는 질문하기
                    </button>
                </div>
            </section>

            <section class="mb-12 bg-white p-8 rounded-lg shadow-sm">
                <h2 class="text-3xl font-bold text-gray-800 mb-6 border-b pb-3">Chapter 2: 교리 해설 - 존경의 7가지 방식과 목적</h2>
                <div class="chapter-content prose">
                    <p>제5계명은 부모와 자녀 관계를 넘어 사회의 모든 <strong>윗사람과 아랫사람 관계</strong>, 나아가 모든 인간관계에 적용되는 원리입니다. 이 중 아랫사람이 윗사람에게 표해야 할 '마땅한 존경'의 구체적인 방식은 7가지로 제시됩니다.</p>
                    
                    <h3 class="text-xl font-semibold text-gray-700 mt-6 mb-3">1. 내면과 외면이 일치하는 공경</h3>
                    <ul>
                        <li>존경은 마음에서 우러나와야 합니다.</li>
                        <li>이 마음은 공손한 말투와 어투, 그리고 존중이 담긴 몸짓, 표정, 자세와 같은 <strong>합당한 행동</strong>으로 표현되어야 합니다.</li>
                    </ul>

                    <h3 class="text-xl font-semibold text-gray-700 mt-6 mb-3">2. 기도와 감사</h3>
                    <ul>
                        <li>윗사람이 그의 권위 아래에서 수행하는 모든 합당한 일들에 대해 하나님과 당사자에게 감사해야 합니다.</li>
                        <li>그들의 역할이 더욱 견고하게 유지되도록 하나님의 도우심을 구하며 <strong>중보 기도</strong>를 해야 합니다. (딤전 2:1-2)</li>
                    </ul>

                    <h3 class="text-xl font-semibold text-gray-700 mt-6 mb-3">3. 덕과 은혜를 본받음</h3>
                    <ul>
                        <li><strong>덕스러운 행위:</strong> 정직, 근면, 신중, 절제, 인내, 공평, 공의와 같은 도덕적 품성을 의미합니다.</li>
                        <li><strong>은혜들:</strong> 성령의 열매(사랑, 희락, 화평, 오래 참음, 자비, 양선, 온유, 절제 등)를 의미합니다.</li>
                        <li>이는 단지 윗사람의 권위 때문에 순종하는 것을 넘어, 그의 <strong>선한 성품과 신앙적 특성</strong>을 배우려는 적극적인 자세를 포함합니다.</li>
                    </ul>

                    <h3 class="text-xl font-semibold text-gray-700 mt-6 mb-3">4. 합법적 명령에 대한 즐거운 순종</h3>
                    <ul>
                        <li>'합법적'이란 <strong>하나님의 법에 일치하는 것</strong>을 의미합니다.</li>
                        <li>명령과 권면이 합법적일 때, 아랫사람은 마지못해 하는 것이 아니라 <strong>기꺼이, 즐거운 마음</strong>으로 순종해야 합니다.</li>
                        <li>이유: 합법적인 권위에 대한 순종은 곧 <strong>하나님께 순종하는 것</strong>과 같기 때문입니다.</li>
                    </ul>

                    <h3 class="text-xl font-semibold text-gray-700 mt-6 mb-3">5. 교정에 대한 겸손한 복종</h3>
                    <ul>
                        <li>윗사람으로부터 하나님의 교훈에 합당한 꾸짖음이나 교정을 받을 때, 분노하거나 완고하게 자신을 변호해서는 안 됩니다.</li>
                        <li>자신의 잘못과 허물을 인정하고 <strong>징계를 겸손히 받아들이는 자세</strong>가 필요합니다. (히 12:9)</li>
                    </ul>

                    <h3 class="text-xl font-semibold text-gray-700 mt-6 mb-3">6. 인격과 권위에 대한 충성, 보호, 지지</h3>
                    <ul>
                        <li>윗사람은 단지 개인이 아니라, 하나님께서 부여하신 <strong>신분과 지위, 권위</strong>를 가진 존재임을 인정해야 합니다.</li>
                        <li>그들의 권위가 부당하게 침해될 때 이를 지켜야 하며, 나아가 그 권위가 증진되도록 <strong>충성스럽게 보호하고 지지</strong>해야 합니다.</li>
                        <li>이 원리는 부모, 목회자, 정부 관리자 등 대상에 따라 다른 양상으로 나타나지만 근본 원리는 동일합니다.</li>
                    </ul>

                    <h3 class="text-xl font-semibold text-gray-700 mt-6 mb-3">7. 연약함에 대한 인내와 사랑의 덮음</h3>
                    <ul>
                        <li>윗사람 역시 타락한 본성을 지닌 인간이므로 연약함과 죄를 가집니다.</li>
                        <li>이때 '연약함'은 명백하고 뻔뻔한 불법 행위가 아닌, <strong>성격상의 결점이나 약점</strong>을 의미합니다.</li>
                        <li>이러한 불법이 아닌 연약함에 대해서는, 이를 빌미로 비난하거나 존경을 거두는 것이 아니라 <strong>인내로 참고 사랑으로 덮어주어야 합니다.</strong> (창 9:23)</li>
                    </ul>

                    <h3 class="text-xl font-semibold text-gray-700 mt-6 mb-3">존경의 궁극적인 목적</h3>
                    <p>위 7가지 존경의 표현은 궁극적으로 <strong>윗사람과 그들의 다스림이 명예롭게 되도록 하기 위함</strong>입니다. 이를 통해 윗사람을 세우신 <strong>하나님께 영광을 돌리는 것</strong>이 아랫사람의 마땅한 의무이며, 그렇지 않을 경우 하나님의 이름을 욕되게 하는 잘못을 범하게 됩니다.</p>
                </div>
                <div class="mt-8 text-right">
                    <button class="ask-question-btn bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition duration-300">
                        이해를 돕는 질문하기
                    </button>
                </div>
            </section>

             <section class="mb-12 bg-white p-8 rounded-lg shadow-sm">
                <h2 class="text-3xl font-bold text-gray-800 mb-6 border-b pb-3">Chapter 3: 적용 질문</h2>
                <div class="chapter-content prose">
                    <ol class="list-decimal ml-5 space-y-4">
                        <li>오늘 학습한 대요리문답 127항은 아랫사람이 윗사람을 향해 보여야 할 존경의 방식을 몇 가지로 구별하여 제시합니까?</li>
                        <li>윗사람의 명령과 권면이 불법적일 경우에도 순종해야 합니까? 윗사람의 명령과 권면이 합법적일 경우 아랫사람이 기꺼이 즐겨 순종해야 하는 이유는 무엇입니까?</li>
                        <li>여러분은 가정, 교회, 또는 사회 속에서 윗사람에 대하여 어떠한 방식으로 존경을 표하여 왔습니까? 구체적으로 돌아보면서 오늘의 교훈을 적용하여 보시기 바랍니다.</li>
                        <li>여러분은 윗사람의 연약함이나 허물을 지금까지 어떻게 대하여 왔습니까? 윗사람의 잘못에 대해 실망하고 이를 비난한 적은 없습니까? 참고 사랑으로 덮으라는 오늘의 교훈이 정당하다고 받아들이십니까?</li>
                    </ol>
                </div>
                 <div class="mt-8 text-right">
                    <button class="ask-question-btn bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition duration-300">
                        이해를 돕는 질문하기
                    </button>
                </div>
            </section>

        </main>
    </div>

    <div id="qaModal" class="modal-overlay hidden">
        <div class="modal-container">
            <div class="flex justify-between items-center mb-4">
                <h3 id="modalTitle" class="text-2xl font-bold">질문하기</h3>
                <button id="closeModalBtn" class="text-gray-500 hover:text-gray-800 text-2xl font-bold">&times;</button>
            </div>
            <div id="answerArea" class="bg-gray-100 p-4 rounded-md mb-4 min-h-[100px] prose">
                <p class="text-gray-600">이곳에 답변이 표시됩니다. 궁금한 점을 아래에 입력하고 질문을 제출해주세요.</p>
            </div>
            <form id="qaForm">
                <textarea id="questionInput" class="w-full p-2 border rounded-md" rows="3" placeholder="예: '합법적'이라는 말의 정확한 의미가 무엇인가요?" required></textarea>
                <button type="submit" id="submitQuestionBtn" class="w-full mt-4 bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition duration-300">
                    질문 제출
                </button>
            </form>
        </div>
    </div>

    <script>
        const qaModal = document.getElementById('qaModal');
        const closeModalBtn = document.getElementById('closeModalBtn');
        const askQuestionBtns = document.querySelectorAll('.ask-question-btn');
        const qaForm = document.getElementById('qaForm');
        const questionInput = document.getElementById('questionInput');
        const answerArea = document.getElementById('answerArea');
        const submitQuestionBtn = document.getElementById('submitQuestionBtn');
        const modalTitle = document.getElementById('modalTitle');

        let currentChapterContext = '';
        let currentChapterTitle = '';

        askQuestionBtns.forEach(btn => {
            btn.addEventListener('click', (e) => {
                const section = e.target.closest('section');
                currentChapterTitle = section.querySelector('h2').innerText;
                const contentDiv = section.querySelector('.chapter-content');
                currentChapterContext = contentDiv.innerText.trim();
                
                modalTitle.innerText = `${currentChapterTitle} - 질문하기`;
                answerArea.innerHTML = '<p class="text-gray-600">이곳에 답변이 표시됩니다. 궁금한 점을 아래에 입력하고 질문을 제출해주세요.</p>';
                questionInput.value = '';
                qaModal.classList.remove('hidden');
            });
        });

        const closeModal = () => {
            qaModal.classList.add('hidden');
        };

        closeModalBtn.addEventListener('click', closeModal);
        qaModal.addEventListener('click', (e) => {
            if (e.target === qaModal) {
                closeModal();
            }
        });

        qaForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const userQuestion = questionInput.value.trim();
            if (!userQuestion) return;

            answerArea.innerHTML = '<p class="text-blue-600">답변을 생성 중입니다... 잠시만 기다려 주세요.</p>';
            submitQuestionBtn.disabled = true;
            submitQuestionBtn.innerText = '생성 중...';

            // Context-enhanced prompt for the model
            const prompt = `
                당신은 신학 교리 전문가입니다. 아래에 제공된 강의 노트 내용을 바탕으로 사용자의 질문에 대해 상세하고 명확하게 답변해주세요. 답변은 강의 노트의 어조와 스타일을 유지해야 합니다.

                ---
                [강의 노트 제목: ${currentChapterTitle}]
                ${currentChapterContext}
                ---

                [사용자 질문]
                ${userQuestion}
            `;

            try {
                const response = await fetch('/api/ask-gemini', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ prompt: prompt }),
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const data = await response.json();

                // Safely access the deeply nested text part of the response
                const botResponseText = data?.candidates?.[0]?.content?.parts?.[0]?.text;

                if (botResponseText) {
                    // Basic Markdown to HTML conversion
                    let formattedResponse = botResponseText
                        .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>') // Bold
                        .replace(/\*(.*?)\*/g, '<em>$1</em>')       // Italics
                        .replace(/\n/g, '<br>');                      // Newlines
                    answerArea.innerHTML = formattedResponse;
                } else {
                     answerArea.innerHTML = '<p class="text-red-600">죄송합니다. 답변을 가져오는 데 실패했습니다. 응답 데이터 형식이 예상과 다릅니다.</p>';
                }

            } catch (error) {
                console.error("Error calling API:", error);
                answerArea.innerHTML = '<p class="text-red-600">죄송합니다. 답변을 생성하는 중에 오류가 발생했습니다. 잠시 후 다시 시도해 주세요.</p>';
            } finally {
                submitQuestionBtn.disabled = false;
                submitQuestionBtn.innerText = '질문 제출';
            }
        });
    </script>

</body>
</html>