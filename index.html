<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>대요리문답 127문: 윗사람에 대한 존경</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pretendard@1.3.9/dist/web/static/pretendard.min.css">
    <style>
        body {
            font-family: 'Pretendard', sans-serif;
        }
        .prose {
            max-width: 100%;
        }
        .prose h1 {
            font-size: 2.25rem;
            line-height: 2.5rem;
            font-weight: 800;
            margin-bottom: 1.5rem;
        }
        .prose h2 {
            font-size: 1.875rem;
            line-height: 2.25rem;
            font-weight: 700;
            margin-top: 2.5rem;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #e5e7eb;
        }
        .prose h3 {
            font-size: 1.25rem;
            line-height: 1.75rem;
            font-weight: 600;
            margin-top: 1.5rem;
            margin-bottom: 0.5rem;
        }
        .prose p, .prose li {
            font-size: 1.1rem;
            line-height: 1.8;
        }
        .prose ul {
            list-style-type: disc;
            padding-left: 1.5rem;
            margin-top: 1rem;
            margin-bottom: 1rem;
        }
        .prose strong {
            font-weight: 600;
            color: #1e3a8a;
        }
        .ask-question-btn {
            margin-top: 1.5rem;
        }
        /* Modal Styles */
        .modal-overlay {
            display: none;
            position: fixed;
            inset: 0;
            background-color: rgba(0, 0, 0, 0.6);
            z-index: 50;
        }
        .modal-container {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            background-color: white;
            padding: 1.5rem 2rem;
            border-radius: 0.5rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div class="container mx-auto max-w-4xl p-6 sm:p-10">
        <main class="prose">
            <h1>대요리문답 127문: 윗사람에 대한 존경</h1>
            <p class="text-lg text-gray-600">본 강의 노트는 대요리문답 127문을 바탕으로, 아랫사람이 윗사람에게 마땅히 표해야 할 존경의 구체적인 방법과 그 신학적 의미를 심층적으로 다룹니다.</p>

            <section class="chapter-container">
                <h2>제1장: 서론: 제5계명의 확장된 적용</h2>
                <div class="chapter-content">
                    <p>제5계명 "네 부모를 공경하라"는 단순히 가정 내의 부모와 자녀 관계에만 국한되지 않습니다. 이 계명은 사회 전반의 모든 <strong>윗사람과 아랫사람 관계</strong>, 그리고 더 나아가 다양한 지위와 역할을 가진 모든 사람들 사이의 관계에 적용되는 포괄적인 원리입니다. </p>
                    <p>본 강의 노트는 이러한 관계 속에서 아랫사람이 윗사람을 어떻게 대해야 하는지에 초점을 맞춥니다. 대요리문답 127문은 아랫사람이 윗사람에게 "마땅한 존경"을 표해야 한다고 가르치며, 그 구체적인 실천 방안을 제시합니다. </p>
                </div>
                <button class="ask-question-btn bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition duration-300">이해를 돕는 질문하기</button>
            </section>

            <section class="chapter-container">
                <h2>제2장: 윗사람에 대한 존경의 7가지 방법</h2>
                <div class="chapter-content">
                    <p>대요리문답 127문은 아랫사람이 윗사람에게 존경을 표하는 7가지 구체적인 방법을 제시합니다. 이는 단순한 예의를 넘어 신앙적인 의무에 해당합니다.</p>
                    
                    <h3>1. 내적, 외적 공경</h3>
                    <p>존경은 마음에서 우러나와야 하며, 말과 행동으로 합당하게 표현되어야 합니다. 단순히 겉으로만 공경하는 척하는 것이 아니라, 진실한 존경의 마음을 가지고 그에 걸맞은 공손한 어투, 표정, 자세를 통해 나타내야 합니다. </p>

                    <h3>2. 기도와 감사</h3>
                    <p>윗사람을 위해 기도하고 감사하는 것은 존경의 중요한 표현입니다. 윗사람이 신앙 안에서 합당한 권위를 행사하는 일들에 대해 하나님과 당사자에게 감사하고, 그 직무가 더욱 견고하게 설 수 있도록 하나님의 도우심을 구해야 합니다. (딤전 2:1-2) </p>

                    <h3>3. 덕과 은혜를 본받음</h3>
                    <p>윗사람의 선한 점들을 본받는 것이 존경의 표현입니다. 이는 두 가지 측면을 가집니다.</p>
                    <ul>
                        <li><strong>덕스러운 행위</strong>: 정직, 근면, 신중, 절제, 공평 등과 같은 도덕적 품성을 의미합니다. </li>
                        <li><strong>은혜들</strong>: 성령의 열매인 사랑, 희락, 화평, 오래 참음, 자비 등 신앙적 성품을 의미합니다. </li>
                    </ul>
                    <p>이것은 윗사람의 권위 때문에 마지못해 순종하는 것을 넘어, 그의 덕과 은혜를 배우고자 하는 적극적인 마음으로 순종해야 함을 의미합니다. (히 13:7) </p>

                    <h3>4. 합법적인 명령에 대한 즐거운 순종</h3>
                    <p>윗사람의 명령이나 권면이 <strong>"합법적"</strong>이라면 즐겨 순종해야 합니다. 여기서 '합법적'이란 하나님의 법, 즉 성경의 가르침에 일치하는 것을 의미합니다. 마지못해 겉으로만 따르는 것이 아니라, 마음을 다해 <strong>'즐겨'</strong> 순종해야 합니다. 왜냐하면 합법적인 권위에 대한 순종은 곧 그 권위를 세우신 하나님께 순종하는 것이기 때문입니다. </p>

                    <h3>5. 교정에 대한 겸손한 복종</h3>
                    <p>윗사람으로부터 하나님의 교훈에 합당한 꾸짖음이나 교정을 받을 때, 화를 내거나 완고하게 자신을 변호해서는 안 됩니다. 자신의 잘못을 인정하고 징계를 겸손히 받아들이는 태도가 필요합니다. (히 12:9) </p>

                    <h3>6. 인격과 권위에 대한 충성</h3>
                    <p>윗사람은 단순히 한 개인이 아니라, 하나님께서 부여하신 권위를 가진 신분과 지위를 지니고 있습니다. 따라서 그들의 인격과 권위에 충성을 다하고, 보호하며, 지지해야 합니다. 만약 윗사람의 권위가 부당하게 침해받을 경우, 이를 지켜주고 오히려 그 권위가 높아지도록 도와야 합니다. 이는 부모, 목회자, 정부 관리자 등 대상에 따라 표현 방식은 다를 수 있으나 동일한 원리가 적용됩니다. </p>

                    <h3>7. 연약함을 사랑으로 덮어줌</h3>
                    <p>윗사람 역시 타락한 본성을 지닌 연약한 인간이므로 죄와 실수가 있음을 인정해야 합니다. 아랫사람은 윗사람의 <strong>'연약함'</strong>을 참고 사랑으로 덮어주어야 합니다. </p>
                    <ul>
                        <li>여기서 '연약함'이란 명백하고 뻔뻔한 불법 행위나 노골적인 악행이 아닌, 성격상의 결점이나 약점을 의미합니다. </li>
                        <li>이러한 약점을 빌미로 비난하거나 불순종하는 것이 아니라, 인내하며 사랑으로 감싸주어야 합니다. (벧전 2:18) </li>
                    </ul>
                </div>
                <button class="ask-question-btn bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition duration-300">이해를 돕는 질문하기</button>
            </section>

            <section class="chapter-container">
                <h2>제3장: 존경의 궁극적인 목적</h2>
                <div class="chapter-content">
                    <p>앞서 설명한 7가지 존경의 표현 방식은 궁극적으로 한 가지 목적을 향합니다. 그것은 바로 <strong>윗사람과 그들의 다스림이 명예롭게 되도록 하기 위함</strong>입니다. </p>
                    <p>아랫사람이 윗사람에게 합당한 존경을 표할 때, 이는 윗사람을 세우신 하나님께 영광을 돌리는 행위가 됩니다. 반대로 윗사람을 존경하지 않는 것은 그들을 통해 드러나야 할 하나님의 권위와 질서를 무시하는 것이며, 결과적으로 하나님의 이름을 빛내지 못하는 잘못을 범하는 것입니다. </p>
                </div>
                <button class="ask-question-btn bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition duration-300">이해를 돕는 질문하기</button>
            </section>
        </main>
    </div>

    <div id="qa-modal" class="modal-overlay">
        <div class="modal-container">
            <div class="flex justify-between items-center mb-4">
                <h3 id="modal-title" class="text-xl font-bold text-gray-900">질문하기</h3>
                <button id="close-modal-btn" class="text-gray-500 hover:text-gray-800 text-2xl">&times;</button>
            </div>
            <div class="space-y-4">
                <p class="text-sm text-gray-600">아래 내용에 기반하여 질문을 구체적으로 입력해주세요.</p>
                <div id="modal-context-display" class="bg-gray-100 p-3 rounded-md max-h-32 overflow-y-auto text-sm">
                    <strong id="modal-context-title" class="font-semibold"></strong>
                    <p id="modal-context-content" class="text-gray-700 mt-1"></p>
                </div>
                <textarea id="user-question" rows="4" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="여기에 질문을 입력하세요..."></textarea>
                <button id="submit-question-btn" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition duration-300">질문 제출</button>
                <div id="gemini-response" class="mt-4 p-4 border-t border-gray-200">
                    <p class="text-gray-500">AI의 답변을 기다리는 중입니다...</p>
                </div>
            </div>
        </div>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const modal = document.getElementById('qa-modal');
            const overlay = document.querySelector('.modal-overlay');
            const closeModalBtn = document.getElementById('close-modal-btn');
            const askQuestionBtns = document.querySelectorAll('.ask-question-btn');
            const submitQuestionBtn = document.getElementById('submit-question-btn');
            
            let currentChapterTitle = '';
            let currentChapterContext = '';

            const openModal = (chapterContainer) => {
                const titleElement = chapterContainer.querySelector('h2');
                const contentElement = chapterContainer.querySelector('.chapter-content');
                
                currentChapterTitle = titleElement ? titleElement.textContent.trim() : '제목 없음';
                currentChapterContext = contentElement ? contentElement.innerText.trim() : '내용 없음';

                document.getElementById('modal-title').textContent = `${currentChapterTitle}에 대해 질문하기`;
                document.getElementById('modal-context-title').textContent = `[참고] ${currentChapterTitle}`;
                document.getElementById('modal-context-content').textContent = currentChapterContext.substring(0, 200) + '...';
                document.getElementById('user-question').value = '';
                document.getElementById('gemini-response').innerHTML = '<p class="text-gray-500">AI의 답변을 기다리는 중입니다...</p>';
                
                modal.style.display = 'block';
            };

            const closeModal = () => {
                modal.style.display = 'none';
            };

            askQuestionBtns.forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const chapterContainer = e.target.closest('.chapter-container');
                    if (chapterContainer) {
                        openModal(chapterContainer);
                    }
                });
            });

            closeModalBtn.addEventListener('click', closeModal);
            overlay.addEventListener('click', (e) => {
                if (e.target === overlay) {
                    closeModal();
                }
            });

            submitQuestionBtn.addEventListener('click', async () => {
                const userQuestion = document.getElementById('user-question').value.trim();
                const responseContainer = document.getElementById('gemini-response');

                if (!userQuestion) {
                    alert('질문을 입력해주세요.');
                    return;
                }

                // Construct the detailed prompt
                const finalPrompt = `
                    당신은 신학적 질문에 답변하는 전문 AI 어시스턴트입니다. 아래에 명시된 두 가지 규칙의 우선순위를 반드시 지켜서 사용자의 질문에 답변해 주세요.

                    [규칙 1: 주어진 자료 우선의 원칙]
                    - 최우선적으로, 아래에 제공되는 "[강의 노트 내용]"에 근거하여 답변을 생성해야 합니다.
                    - 자료에 명시된 사실과 논리를 바탕으로 질문에 직접적으로 답해주세요.

                    [규칙 2: 신학적 보충의 원칙]
                    - 만약 "[강의 노트 내용]"만으로 답변하기에 정보가 불충분하거나 관련 내용이 없을 경우에만, '전통적 개혁신학'의 관점에서 답변을 보충할 수 있습니다.
                    - 이 경우, 답변이 주어진 자료에서 나온 것이 아님을 명확히 하기 위해 "강의 노트 내용에 직접 언급되지는 않았지만, 전통적 개혁신학의 관점에서 볼 때..."와 같이 서술을 시작해주세요.

                    ---
                    [강의 노트 제목]: ${currentChapterTitle}
                    ---
                    [강의 노트 내용]:
                    ${currentChapterContext}
                    ---
                    [사용자 질문]:
                    ${userQuestion}
                `;

                responseContainer.innerHTML = '<p class="text-blue-600 animate-pulse">답변을 생성하는 중입니다. 잠시만 기다려주세요...</p>';
                submitQuestionBtn.disabled = true;
                submitQuestionBtn.classList.add('opacity-50', 'cursor-not-allowed');

                try {
                    const response = await fetch('/api/ask-gemini', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({ prompt: finalPrompt }),
                    });

                    if (!response.ok) {
                        throw new Error(`서버 오류가 발생했습니다: ${response.status} ${response.statusText}`);
                    }

                    const data = await response.json();
                    
                    // Safely access the response text
                    let answer = 'AI로부터 유효한 답변을 받지 못했습니다. 응답 형식을 확인해주세요.';
                    if (data && data.candidates && data.candidates[0] && data.candidates[0].content && data.candidates[0].content.parts && data.candidates[0].content.parts[0] && data.candidates[0].content.parts[0].text) {
                        answer = data.candidates[0].content.parts[0].text;
                    } else {
                        console.error('Unexpected response structure:', data);
                    }

                    // Simple markdown to HTML conversion for presentation
                    let formattedAnswer = answer
                        .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>') // Bold
                        .replace(/\*(.*?)\*/g, '<em>$1</em>')     // Italic
                        .replace(/\n/g, '<br>');                // Newlines

                    responseContainer.innerHTML = `<p class="text-gray-800 leading-relaxed">${formattedAnswer}</p>`;

                } catch (error) {
                    console.error('Fetch error:', error);
                    responseContainer.innerHTML = `<p class="text-red-600">오류가 발생했습니다: ${error.message}</p>`;
                } finally {
                    submitQuestionBtn.disabled = false;
                    submitQuestionBtn.classList.remove('opacity-50', 'cursor-not-allowed');
                }
            });
        });
    </script>

</body>
</html>
