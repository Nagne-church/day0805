<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>대요리문답 127문: 윗사람에 대한 존경</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <style>
        body {
            font-family: 'Pretendard', sans-serif;
        }
        .prose {
            max-width: 100%;
        }
        .prose h1 {
            font-size: 2.25rem; /* 36px */
            line-height: 2.5rem; /* 40px */
            font-weight: 800;
            margin-bottom: 1rem;
        }
        .prose h2 {
            font-size: 1.875rem; /* 30px */
            line-height: 2.25rem; /* 36px */
            font-weight: 700;
            margin-top: 3rem;
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #e5e7eb;
        }
        .prose h3 {
            font-size: 1.25rem; /* 20px */
            line-height: 1.75rem; /* 28px */
            font-weight: 600;
            margin-top: 2rem;
            margin-bottom: 1rem;
        }
        .prose p, .prose ul {
            font-size: 1rem; /* 16px */
            line-height: 1.75;
            color: #374151;
        }
        .prose strong {
            font-weight: 600;
            color: #111827;
        }
        .prose ul {
            list-style-type: disc;
            padding-left: 1.5rem;
            margin-top: 1rem;
            margin-bottom: 1rem;
        }
        .prose li {
            margin-bottom: 0.5rem;
        }
        .ask-question-btn {
            display: inline-block;
            margin-top: 1.5rem;
            padding: 0.75rem 1.5rem;
            background-color: #4f46e5;
            color: white;
            font-weight: 600;
            border-radius: 0.375rem;
            transition: background-color 0.3s;
            cursor: pointer;
        }
        .ask-question-btn:hover {
            background-color: #4338ca;
        }
        /* Modal Styles */
        #qaModal.hidden {
            display: none;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div id="content-container" class="prose max-w-4xl mx-auto px-6 py-12">
        <h1>대요리문답 127문: 윗사람에 대한 존경</h1>

        <div class="chapter-content">
            <h2>서론: 제5계명의 확장된 적용</h2>
            <p>제5계명의 적용은 부모와 자녀 사이의 가정에만 국한되지 않고 윗사람과 아랫사람의 관계 전반에 반영되며, 더 나아가 다양한 지위와 역할 속에 있는 모든 사람들 사이의 관계에도 적용됩니다. [cite: 26] [cite_start]이 수업 노트는 그중 아랫사람이 윗사람에 대하여 어떻게 존경을 표해야 하는지 살핍니다. [cite: 28] [cite_start]아랫사람은 윗사람에 대하여 "마땅한 존경"을 표해야 합니다. [cite: 29]</p>
        </div>

        <div class="chapter-content">
            <h2>제1장: 아랫사람이 윗사람에게 존경을 표하는 7가지 방식</h2>
            [cite_start]<p>대요리문답 127항은 아랫사람이 윗사람에게 존경을 표하는 7가지 구체적인 방식을 제시하고, 마지막에는 이 모든 존경의 궁극적인 목적을 진술합니다. [cite: 29, 30]</p>

            <h3>1. 내적·외적 존경의 표현</h3>
            [cite_start]<p>존경은 외적으로만 아니라 내적으로도 표해야 합니다. [cite: 30] [cite_start]곧 존경의 마음을 가지고, 이에 합당한 표현과 어투로 말하며, 몸짓이나 표정, 자세 등의 행위에 있어서 합당한 존경을 표해야 합니다. [cite: 31]</p>

            <h3>2. 기도와 감사</h3>
            [cite_start]<p>윗사람이 생활과 신앙에 있어서 합당한 권위로 행하는 여러 일에 대하여 하나님께 그리고 이들에게 감사를 표하며, 이 일이 더욱 견고하도록 하나님의 도우심을 구하며 이들을 위해 기도해야 합니다. [cite: 32]</p>

            <h3>3. 덕과 은혜의 모방</h3>
            [cite_start]<p>윗사람이 행하는 덕스러운 행위와 은혜들을 본받는 것입니다. [cite: 33] [cite_start]'덕스러운 행위들'은 정직, 근면, 신중, 절제, 인내, 공평, 공의 등과 같은 도덕적 품성을 말하며, '은혜들'이란 사랑, 희락, 화평, 오래 참음, 자비, 양선, 온유, 절제와 같이 성령의 열매로 주어지는 것들을 의미합니다. [cite: 33, 34] [cite_start]윗사람의 성품과 무관하게 그를 본받아야 하며, 단지 권위 때문이 아니라 순종을 통해 그의 덕과 은혜를 배우려는 마음으로 순종해야 합니다. [cite: 35, 36]</p>

            <h3>4. 합법적 명령에 대한 즐거운 순종</h3>
            [cite_start]<p>윗사람의 명령이나 권면이 "합법적"이라면, 즉 하나님의 법에 일치한다면 즐겁고 기꺼이 순종해야 합니다. [cite: 38] [cite_start]이는 마지못해 하는 순종이 아닌 마음을 담은 순종이어야 하며, 합법적인 명령에 대한 순종은 곧 하나님께 순종하는 것과 같기 때문입니다. [cite: 39]</p>

            <h3>5. 교정에 대한 겸손한 복종</h3>
            [cite_start]<p>윗사람으로부터 하나님의 교훈에 합당한 꾸짖음과 교정을 받을 때, 화를 내거나 완고하게 자신이 옳다고 주장하지 말고, 자신의 허물과 과오를 인정하며 징계를 겸손히 받아들여야 합니다. [cite: 39]</p>

            <h3>6. 인격과 권위에 대한 충성</h3>
            [cite_start]<p>윗사람을 개인 인격으로만 보지 않고, 하나님께서 부여하신 권위를 받은 신분과 지위를 가졌음을 알고 이에 합당한 존엄을 충성스럽게 인정해야 합니다. [cite: 39] [cite_start]윗사람의 신분과 권위가 부당하게 침해받을 경우 이를 지켜야 하며, 오히려 그 신분과 권위가 증진되도록 보호해야 합니다. [cite: 40]</p>

            <h3>7. 연약함을 사랑으로 덮어줌</h3>
            [cite_start]<p>윗사람 또한 타락한 본성을 지닌 연약한 인간이므로, 그들의 연약함을 참고 사랑으로 덮어야 합니다. [cite: 40] [cite_start]여기서 "연약함"이란 노골적인 악행이나 명백한 불법이 아닌, 인내로 참고 사랑으로 덮어주어야 할 성격상의 결점이나 약점을 의미합니다. [cite: 40, 41] [cite_start]불법이 아니라면, 이러한 약점을 빌미로 합당한 존경을 거두지 말고 인내하며 사랑으로 감추어 덮어야 합니다. [cite: 41, 46]</p>
            <button class="ask-question-btn">이해를 돕는 질문하기</button>
        </div>

        <div class="chapter-content">
            <h2>제2장: 존경의 궁극적인 목적</h2>
            [cite_start]<p>지금까지 논의된 7가지 존경의 표현 방식은 바로 윗사람과 그들의 다스림이 명예롭게 되도록 하기 위함입니다. [cite: 47] [cite_start]아랫사람이 윗사람을 존경하여 세움으로써, 그들을 세우신 하나님께 영광을 돌리는 것이 마땅합니다. [cite: 48] [cite_start]만일 그렇게 하지 않으면 하나님의 이름을 빛내지 못하는 잘못을 범하는 것입니다. [cite: 49]</p>
            <button class="ask-question-btn">이해를 돕는 질문하기</button>
        </div>
    </div>

    <div id="qaModal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center">
        <div class="bg-white p-8 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col">
            <div class="flex justify-between items-center mb-4">
                <h2 id="modalTitle" class="text-2xl font-bold">질문하기</h2>
                <button id="closeModalBtn" class="text-gray-500 hover:text-gray-800 text-3xl">&times;</button>
            </div>
            <div id="modalContent" class="space-y-4 overflow-y-auto flex-grow">
                <p class="font-semibold">주제: <span id="chapterTitle" class="font-normal"></span></p>
                <div>
                    <label for="userQuestion" class="block mb-2 font-semibold text-gray-700">질문을 입력하세요:</label>
                    <textarea id="userQuestion" class="w-full h-24 p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" placeholder="이 장의 내용과 관련하여 궁금한 점을 질문해주세요..."></textarea>
                </div>
                <button id="submitQuestionBtn" class="w-full px-4 py-2 bg-indigo-600 text-white font-semibold rounded-md hover:bg-indigo-700 transition">
                    답변 생성하기
                </button>
                <div id="answerArea" class="mt-4 p-4 border-t border-gray-200 hidden">
                    <h3 class="font-bold text-lg mb-2">Gemini의 답변</h3>
                    <div id="answerText" class="text-gray-800 whitespace-pre-wrap leading-relaxed"></div>
                </div>
            </div>
        </div>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const qaModal = document.getElementById('qaModal');
            const closeModalBtn = document.getElementById('closeModalBtn');
            const submitQuestionBtn = document.getElementById('submitQuestionBtn');
            const askButtons = document.querySelectorAll('.ask-question-btn');
            
            let currentChapterTitle = '';
            let currentChapterContext = '';

            const openModal = (btn) => {
                const chapterContentDiv = btn.closest('.chapter-content');
                currentChapterTitle = chapterContentDiv.querySelector('h2').textContent;
                
                const tempDiv = chapterContentDiv.cloneNode(true);
                tempDiv.querySelectorAll('h2, .ask-question-btn').forEach(el => el.remove());
                currentChapterContext = tempDiv.innerText.trim();
                
                document.getElementById('chapterTitle').textContent = currentChapterTitle;
                document.getElementById('userQuestion').value = '';
                document.getElementById('answerArea').classList.add('hidden');
                document.getElementById('answerText').innerHTML = '';
                qaModal.classList.remove('hidden');
            };

            const closeModal = () => {
                qaModal.classList.add('hidden');
            };

            askButtons.forEach(btn => {
                btn.addEventListener('click', () => openModal(btn));
            });

            closeModalBtn.addEventListener('click', closeModal);
            window.addEventListener('click', (event) => {
                if (event.target === qaModal) {
                    closeModal();
                }
            });

            submitQuestionBtn.addEventListener('click', async () => {
                const userQuestion = document.getElementById('userQuestion').value.trim();
                if (!userQuestion) {
                    alert('질문을 입력해주세요.');
                    return;
                }

                const finalPrompt = `
                    당신은 신학적 질문에 답변하는 전문 AI 어시스턴트입니다. 아래에 명시된 두 가지 규칙의 우선순위를 반드시 지켜서 사용자의 질문에 답변해 주세요.

                    [규칙 1: 주어진 자료 우선의 원칙]
                    - 최우선적으로, 아래에 제공되는 "[강의 노트 내용]"에 근거하여 답변을 생성해야 합니다.
                    - 자료에 명시된 사실과 논리를 바탕으로 질문에 직접적으로 그리고 자연스럽게 답해주세요.

                    [규칙 2: 신학적 보충의 원칙]
                    - 만약 "[강의 노트 내용]"만으로 답변하기에 정보가 불충분하거나 관련 내용이 없을 경우에는, '전통적 개혁신학'의 관점에서 답변을 보충할 수 있습니다.
                    - 이 경우, 답변의 문맥상 필요하다면 "전통적 개혁신학의 관점에서 볼 때..."와 같이 서술을 시작해주세요.

                    ---
                    [강의 노트 제목]: ${currentChapterTitle}
                    ---
                    [강의 노트 내용]:
                    ${currentChapterContext}
                    ---
                    [사용자 질문]:
                    ${userQuestion}
                `;

                const answerArea = document.getElementById('answerArea');
                const answerText = document.getElementById('answerText');
                
                answerArea.classList.remove('hidden');
                answerText.innerHTML = '<p>답변을 생성하는 중입니다. 잠시만 기다려주세요...</p>';
                submitQuestionBtn.disabled = true;
                submitQuestionBtn.classList.add('bg-indigo-400');
                submitQuestionBtn.classList.remove('bg-indigo-600', 'hover:bg-indigo-700');

                try {
                    const response = await fetch('/api/ask-gemini', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({ prompt: finalPrompt }),
                    });

                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    const data = await response.json();
                    
                    let resultText = "답변을 생성하지 못했습니다. 다시 시도해 주세요.";
                    if (data && data.candidates && data.candidates[0] && data.candidates[0].content && data.candidates[0].content.parts && data.candidates[0].content.parts[0] && data.candidates[0].content.parts[0].text) {
                        resultText = data.candidates[0].content.parts[0].text;
                    } else {
                        console.error("Unexpected response structure:", data);
                    }
                    
                    answerText.innerText = resultText;

                } catch (error) {
                    console.error('Error fetching answer:', error);
                    answerText.innerHTML = `<p class="text-red-500">오류가 발생했습니다: ${error.message}</p><p>Vercel 배포 환경이 아닌 경우, 서버리스 함수(api/ask-gemini.js)가 작동하지 않을 수 있습니다.</p>`;
                } finally {
                    submitQuestionBtn.disabled = false;
                    submitQuestionBtn.classList.remove('bg-indigo-400');
                    submitQuestionBtn.classList.add('bg-indigo-600', 'hover:bg-indigo-700');
                }
            });
        });
    </script>
</body>
</html>
